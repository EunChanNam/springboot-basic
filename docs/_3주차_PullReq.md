## 📌 과제 설명
스프링부트 `basic` 위클리미션을 코드리뷰하는 저장소입니다.

### 개발 환경
- Springboot 3.1.0
- Java 17
- Gradle(Build Tool)

## 👩‍💻 요구 사항과 구현 내용

#### 기능명세와 PullRequest
- 기능명세는 docs..에 정리해두었습니다!
- 1, 2주차 PR 내용은 docs..에 정리해두었습니다!

#### 추가된 기능
- 바우처의 `Rest Controller`만 따로 구현을 해놓고 그에 따른 테스트를 진행하였습니다.
- 요구사항에 맞는 `View` 페이지와 그에 맞는 `Spring MVC Controller`를 구현했습니다.
- 예외에 대한 핸들링을 `@RestControllerAdvice`와 `@ExceptionHandler`를 사용했습니다.

## ✅ PR 포인트 & 궁금한 점
#### PR 포인트
- 프론트와 원활한 소통을 위해 예외 핸들링 부분에서 `DTO`에 대한 `MethodArgumentNotValidException` 예외 응답 양식에 대해 따로 구현을 해놓았습니다.
  - 예외를 처리할 핸들러는 `global.error.handler.NotValidExceptionHandler` 클래스에서 구현했습니다.
    - `@RestControllerAdvice`와 `@ExceptionHandler`를 활용했습니다.
  - 예외를 담을 응답 양식은 `global.response.ResponseError` 클래스에서 구현을 해놓았습니다.
    - 구현 방식은 `record`를 사용했고 `@JsonInclude` 어노테이션을 활용해 필요한 값만 넘기도록 하였습니다.

## 2차 PR Review 답변
#### 훈기 멘토님 : `DTO`를 `inner` 클래스로 만든 이유가 있을까요? 
- `static inner class`로 만든 이유는 다음과 같습니다.
> `static` 내부 클래스는 자신을 둘러싸는 바깥 클래스 인스턴스의 임시적 참조를 유지하지 않습니다! 즉, 내부 클래스를 `static`으로 선언한다면 메모리 누수를 예방할 수 있고, 클래스의 각 인스턴스당 더 적은 메모리를 사용하게 됩니다!

#### 훈기 멘토님 : `DTO`를 `inner` 클래스로 만들면 나중에 잭슨을 사용할 때 문제가 될일은 없을까요?
- 문제 되지 않는다고 알고 있습니다!
> jackson 라이브러리가 `non-static inner class`에 대해 `exception`을 던지는 이유는, 기본 생성자가 없어 객체를 초기화 시키지 못하기 때문입니다. 따라서 `inner` 클래스를 `JSON` 매핑해줄 경우 `static`을 명시한다면, 문제되지 않습니다!
[참조 링크](http://www.cowtowncoder.com/blog/archives/2010/08/entry_411.html)

#### 훈기 멘토님 : 지갑과 바우처가 다대일이라고 하셨는데 지갑이 다이고 바우처가 일인건가요?
- 네! 맞습니다! 
> 지갑(다) : 바우처(일) 이와 같이 설계한 이유는 하나의 지갑 테이블로 할당된 바우처만 따로 관리하기 위해서 였습니다!!

#### 훈기 멘토님 : 다대일일경우, 바우처가 회원에 종속된다고 했는데 맞지않나요? 만약 종속되지 않는다면 바우처가 여러 회원을 가질 수 있는건데 혁준님께서 바우처와 회원은 다대일 관계라고 하신거면 바우처가 회원에 종속되는게 맞다고 생각해서요.
- 제가 글을 너무 난해하게 작성한 것 같습니다!
> 제가 원하는 바는 중간에 매핑용 테이블인 지갑 테이블이 없고 null 할당이 불가능할 때, 아직 할당이 되지 않은 쿠폰 생성은 불가능 하기 때문에, 등록할 회원이 없다면 쿠폰 생성도 불가능한 갱신 이상 이 발생하여 종속된다는 말이었습니다!
때문에, 중간에 매핑용(지갑) 테이블을 두어서 할당된 쿠폰들은 따로 관리하고 null 여부 상관없이 쿠폰은 생성할 수 있게 한다는 말입니다!

#### 조셉 멘토님 : 값 하나를 위해, DTO로 래핑할 필요가 있을까 싶어요. 또 CREATE 와 UPDATE와 같이 DTO 필드가 같은 것이 있는데 굳이 분리해야 할까요?
- 추후 확장을 위해 이와 같이 구현했습니다! 확장을 어디까지 예측해야 하는 지가 참 어려운 것 같습니다.
> 추후에 필드가 더 다양해졌을 때, 미리 DTO를 만들어 둔다면, 확장에 용이할까 싶어서 이와 같이 구현했습니다! 불필요한 확장일까요?

