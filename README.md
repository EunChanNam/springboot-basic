# SpringBoot Basic Weekly Mission

스프링부트 basic 위클리미션을 코드리뷰하는 Repository입니다.


주차별 과제는 노션에서 확인하세요!
[노션에서 미션 확인가기](https://www.notion.so/backend-devcourse/Part1-3-38f57acca0dd490db11393701417943a)


## SpringBoot Part2 Weekly Mission

**(기본)** **바우처 관리 애플리케이션**

- [x]  바우처 관리 애플리케이션에 단위테스트를 작성해보세요.
    - 가능한 많은 단위 테스트코드를 작성하려고 노력해보세요.
    - 엣지 케이스(예외 케이스)를 고려해서 작성해주세요.
    - Hamcrest 의 메쳐들을 다양하게 작성해보고 익숙해져 보세요.
- [x]  바우처 관리 애플리케이션에서도 과정에서 다루었던 고객을 적용해보세요.
    - customers 테이블 정의 및 추가
    - CustomerRepository 추가 및 JdbcTemplate을 사용해서 구현
- [x]  (1주차를 파일로 관리하게 했다.) 바우처 정보를 DB로 관리해보세요.
    - 바우처에 엔터티에 해당하는 vouchers 테이블을 한번 정의해보세요.
    - 바우처 레포지토리를 만들어보세요. (JdbcTemplate을 사용해서 구현)
    - 기존의 파일에서 바우처를 관리한 것을 vouchers 테이블을 통해서 CRUD가 되게 해보세요.

**(심화)** **바우처 지갑을 만들어보세요.**

- 특정 고객에게 바우처를 할당할 수 있습니다.
- 고객이 어떤 바우처를 보유하고 있는지 조회할 수 있어야 합니다.
- 고객이 보유한 바우처를 제거할 수 있어야 합니다.
- 특정 바우처를 보유한 고객을 조회할 수 있어야 합니다.



### 🧑‍💻 요구 사항과 구현 내용


##### Console
* 입력, 출력 기능을 담당합니다.
* 각 명령어에 따른 행동을 하도록 합니다.
* 입력값이 잘 못된 경우 다시 입력받도록 합니다.
##### Voucher
* 바우처를 관리합니다.
  * 바우처를 추가, 조회할 수 있습니다.
  * 특정 바우처 타입을 가지고 있는 고객 명단을 조회할 수 있습니다.
##### Customer
* 고객를 관리를 합니다.
    * 고객 블랙리스트 명단을 출력합니다.
    * 고객을 추가할 수 있습니다.
    * 고객의 명단을 조회할 수 있습니다.
    * 고객에게 바우처를 할당할 수 있습니다.
    * 고객이 보유한 바우처를 조회, 제거 할 수 있습니다.

##### Wallet
* 고객마다 바우처를 가지고 있는 지갑을 관리합니다.

### 💡 PR 포인트 & 궁금한 점

---
##### 1. walletService
제 코드의 WalletService 부분을 보면 customerService, voucherService를 사용하고 있습니다.  
멘토님이 말씀해주신 퍼사드 패턴을 적용하고 싶어 wallet에 관련된 작업을 할 때 customerService 와 voucherService의 기능이 필요하여
한 서비스(walletService)에 모아서 사용하는 방식으로 했는데 이런식으로 처음 사용하다 보니 이게 퍼사드 패턴이 맞는지 헷갈리고  
이런 식으로 구현을 하여도 문제가 없는지 궁금합니다

##### 2. 
voucher 인터페이스를 구현하는 구현체들을 구현하는 도중에 JdbcVoucherRepository에는 필요한 기능이 있고  
file이나 memory에서는 필요가 없다고 생각하여  ```return null```을 하거나 구현을 하지 않은 부분이 생겼습니다.  
이렇게 안쓰는 메서드가 있다면 없애고 싶지만 또 추상화를 통해 VoucherRepository를 사용하고 싶어서 interface에 메서드를 선언하고  
필요한 구현체에서만 구현을 하였습니다.  
이런 상황에서는 어떻게 처리를 해야 좋은지 궁금합니다.

##### 3. DB
저는 이 과제에서 바우처와 고객을 다대다 관계로 보고 
바우처 지갑을 매핑 테이블(wallet table)을 만들어 처리를 하였습니다.  
이럴 때는 제가 한 것 처럼 매핑 테이블을 만들어서 사용하는 것이 맞는지 아니면  
각 바우처 마다 고객의 Id을 저장하는 필드를 만들고  
각 고객마다 가지고 있는 바우처의 Id을 저장하는 필드를 만들어서 사용하는 것이 맞는지 궁금합니다.

##### 4. DDD 관련
제가 멘토님 말씀을 듣고 조금 관련해서 찾아보고 패키지 구조를 바꾸어 보았는데  
이런 패키지 구조가 맞는지 궁금합니다 😭

##### 5. 코드리뷰..
제가 저번 코드 리뷰를 남겨주신것에 대한 수정을 하고 새로운 과제를 하면서 기능을 추가하다   
빠르게 PR을 보내고 싶어 코멘트도 달지 않고 예전 PR을 머지하고 말았습니다...
죄송합니다 .......
